(this["webpackJsonpreact-chat-app"]=this["webpackJsonpreact-chat-app"]||[]).push([[0],{42:function(t,e,a){},52:function(t,e,a){},53:function(t,e,a){"use strict";a.r(e);var n=a(4),c=a.n(n),r=a(32),s=a.n(r),i=(a(42),a(17)),o=a(20),l=a(29),u=a(8),b=a(12),j=a(24);j.a.initializeApp({apiKey:"AIzaSyCydzw3BRykkSMEI5Nh2MXjSF_VzIygRcA",authDomain:"justalk-43797.firebaseapp.com",projectId:"justalk-43797",storageBucket:"justalk-43797.appspot.com",messagingSenderId:"986737659328",appId:"1:986737659328:web:ca92b26f3916cf82d84c25",databaseURL:"https://justalk-43797-default-rtdb.firebaseio.com/"});var h=j.a.auth,p=j.a.database(),d=a(2);var m=function(){return Object(d.jsx)("header",{children:Object(d.jsxs)("nav",{className:"navbar navbar-expand-sm fixed-top navbar-light",style:{zIndex:"1"},children:[Object(d.jsx)(b.b,{className:"navbar-brand",to:"/",style:{color:"#fff"},children:"Justalk"}),Object(d.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(d.jsx)("span",{className:"navbar-toggler-icon"})}),Object(d.jsx)("div",{className:"collapse navbar-collapse justify-content-end",id:"navbarNavAltMarkup",children:h().currentUser?Object(d.jsx)("div",{className:"navbar-nav",children:Object(d.jsx)("button",{className:"btn btn-primary mr-3",onClick:function(){return h().signOut()},children:"Logout"})}):Object(d.jsxs)("div",{className:"navbar-nav",children:[Object(d.jsx)(b.b,{className:"nav-item nav-link mr-3",to:"/login",style:{color:"#74808a"},children:"Sign In"}),Object(d.jsx)(b.b,{className:"nav-item nav-link mr-3",to:"/signup",style:{color:"#74808a"},children:"Sign Up"})]})})]})})};var f=function(){return Object(d.jsx)("div",{className:"home",children:Object(d.jsx)("section",{children:Object(d.jsx)("div",{className:"jumbotron jumbotron-fluid py-5",style:{background:"rgba(46, 45, 43, 1)"},children:Object(d.jsxs)("div",{className:"container text-center py-5",children:[Object(d.jsx)("h1",{className:"display-4",style:{color:"#fff"},children:"Welcome to Justalk"}),Object(d.jsx)("p",{className:"lead",style:{color:"#74808a"},children:"A great place to share your thoughts with friends"}),Object(d.jsxs)("div",{className:"mt-4",children:[Object(d.jsx)(b.b,{className:"btn btn-primary px-5 mr-3",to:"/signup",children:"Create New Account"}),Object(d.jsx)(b.b,{className:"btn btn-secondary px-5",to:"/login",children:"Login to Your Account"})]})]})})})})},x=a(10),O=a.n(x),v=a(16),g=a(34),y=a(35),N=a(22),k=a(37),w=a(36),S=function(t){Object(k.a)(a,t);var e=Object(w.a)(a);function a(t){var n;return Object(g.a)(this,a),(n=e.call(this,t)).state={user:h().currentUser,chats:[],content:"",readError:null,writeError:null,loadingChats:!1},n.handleChange=n.handleChange.bind(Object(N.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(N.a)(n)),n.myRef=c.a.createRef(),n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){var t=Object(v.a)(O.a.mark((function t(){var e,a=this;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.setState({readError:null,loadingChats:!0}),e=this.myRef.current;try{p.ref("chats").on("value",(function(t){var n=[];t.forEach((function(t){n.push(t.val())})),n.sort((function(t,e){return t.timestamp-e.timestamp})),a.setState({chats:n}),e.scrollBy(0,e.scrollHeight),a.setState({loadingChats:!1})}))}catch(n){this.setState({readError:n.message,loadingChats:!1})}case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"handleChange",value:function(t){this.setState({content:t.target.value})}},{key:"handleSubmit",value:function(){var t=Object(v.a)(O.a.mark((function t(e){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),this.setState({writeError:null}),a=this.myRef.current,t.prev=3,t.next=6,p.ref("chats").push({content:this.state.content,timestamp:Date.now(),uid:this.state.user.uid});case 6:this.setState({content:""}),a.scrollBy(0,a.scrollHeight),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),this.setState({writeError:t.t0.message});case 13:case"end":return t.stop()}}),t,this,[[3,10]])})));return function(e){return t.apply(this,arguments)}}()},{key:"formatTime",value:function(t){var e=new Date(t);return"".concat(e.getDate(),"/").concat(e.getMonth()+1,"/").concat(e.getFullYear()," ").concat(e.getHours(),":").concat(e.getMinutes())}},{key:"render",value:function(){var t=this;return Object(d.jsxs)("div",{children:[Object(d.jsx)("br",{}),Object(d.jsxs)("div",{className:"chat-area",ref:this.myRef,children:[this.state.loadingChats?Object(d.jsx)("div",{className:"spinner-border text-success",role:"status",children:Object(d.jsx)("span",{className:"sr-only",children:"Loading..."})}):"",this.state.chats.map((function(e){return Object(d.jsxs)("p",{className:"chat-bubble "+(t.state.user.uid===e.uid?"current-user":""),children:[e.content,Object(d.jsx)("br",{}),Object(d.jsx)("span",{className:"chat-time float-right",children:t.formatTime(e.timestamp)})]},e.timestamp)}))]}),Object(d.jsxs)("form",{onSubmit:this.handleSubmit,className:"mx-3",style:{textAlign:"center"},children:[Object(d.jsx)("br",{}),Object(d.jsx)("textarea",{className:"form-control",name:"content",onChange:this.handleChange,value:this.state.content,style:{display:"block",marginLeft:"auto",marginRight:"auto"}}),this.state.error?Object(d.jsx)("p",{className:"text-danger",children:this.state.error}):null,Object(d.jsx)("button",{type:"submit",className:"btn btn-submit px-5 mt-4",children:"Send"})]}),Object(d.jsxs)("div",{className:"py-5 mx-3",style:{color:"rgb(116, 128, 138)",textAlign:"center"},children:["Logged in as: ",Object(d.jsx)("strong",{className:"text-info",children:this.state.user.email})]})]})}}]),a}(n.Component);function C(t,e){return h().createUserWithEmailAndPassword(t,e)}function A(t,e){return h().signInWithEmailAndPassword(t,e)}function E(){var t=new h.GoogleAuthProvider;return h().signInWithPopup(t)}function I(){var t=new h.GithubAuthProvider;return h().signInWithPopup(t)}var L=function(){var t=Object(n.useState)(),e=Object(i.a)(t,2),a=e[0],c=e[1],r=Object(n.useState)(),s=Object(i.a)(r,2),o=s[0],l=s[1],u=Object(n.useState)(null),j=Object(i.a)(u,2),h=j[0],p=j[1],m=function(){var t=Object(v.a)(O.a.mark((function t(e){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),p(""),t.prev=2,t.next=5,C(a,o);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),p(t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=Object(v.a)(O.a.mark((function t(e){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),p(t.t0.message);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=Object(v.a)(O.a.mark((function t(e){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),p(t.t0.message);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}();return Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("form",{className:"mt-5 py-5 px-5",autoComplete:"off",onSubmit:m,children:[Object(d.jsxs)("h1",{style:{color:"#74808a"},children:["Sign Up to",Object(d.jsx)(b.b,{className:"title ml-2",to:"/",children:"Justalk"})]}),Object(d.jsx)("br",{}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{className:"form-control",placeholder:"Email",name:"email",type:"email",onChange:function(t){return c(t.target.value)},value:a})}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{className:"form-control",placeholder:"Password",name:"password",onChange:function(t){return l(t.target.value)},value:o,type:"password"})}),Object(d.jsxs)("div",{className:"form-group",children:[h?Object(d.jsx)("p",{children:h}):null,Object(d.jsx)("button",{className:"btn btn-primary px-5",type:"submit",children:"Sign up"})]}),Object(d.jsx)("p",{style:{color:"rgb(116, 128, 138)"},children:"You can also sign up with any of these services"}),Object(d.jsx)("button",{className:"btn btn-danger mr-2",type:"button",onClick:x,children:"Sign up with Google"}),Object(d.jsx)("button",{className:"btn btn-secondary",type:"button",onClick:f,children:"Sign up with GitHub"}),Object(d.jsx)("hr",{}),Object(d.jsxs)("p",{style:{color:"rgb(116, 128, 138)"},children:["Already have an account? ",Object(d.jsx)(b.b,{to:"/login",children:"Login"})]})]})})};var D=function(){var t=Object(n.useState)(),e=Object(i.a)(t,2),a=e[0],c=e[1],r=Object(n.useState)(),s=Object(i.a)(r,2),o=s[0],l=s[1],u=Object(n.useState)(null),j=Object(i.a)(u,2),h=j[0],p=j[1],m=function(){var t=Object(v.a)(O.a.mark((function t(e){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),p(""),t.prev=2,t.next=5,A(a,o);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),p(t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=Object(v.a)(O.a.mark((function t(e){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),p(t.t0.message);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=Object(v.a)(O.a.mark((function t(e){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),p(t.t0.message);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}();return Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("form",{className:"mt-5 py-5 px-5",autoComplete:"off",onSubmit:m,children:[Object(d.jsxs)("h1",{style:{color:"#74808a"},children:["Login to",Object(d.jsx)(b.b,{className:"title ml-2",to:"/",children:"Justalk"})]}),Object(d.jsx)("br",{}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{className:"form-control",placeholder:"Email",name:"email",type:"email",onChange:function(t){return c(t.target.value)},value:a})}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{className:"form-control",placeholder:"Password",name:"password",onChange:function(t){return l(t.target.value)},value:o,type:"password"})}),Object(d.jsxs)("div",{className:"form-group",children:[h?Object(d.jsx)("p",{className:"text-danger",children:h}):null,Object(d.jsx)("button",{className:"btn btn-primary px-5",type:"submit",children:"Login"})]}),Object(d.jsx)("p",{style:{color:"rgb(116, 128, 138)"},children:"You can also log in with any of these services"}),Object(d.jsx)("button",{className:"btn btn-danger mr-2",type:"button",onClick:x,children:"Sign in with Google"}),Object(d.jsx)("button",{className:"btn btn-secondary",type:"button",onClick:f,children:"Sign in with GitHub"}),Object(d.jsx)("hr",{}),Object(d.jsxs)("p",{style:{color:"rgb(116, 128, 138)"},children:["Don't have an account? ",Object(d.jsx)(b.b,{to:"/signup",children:"Sign up"})]})]})})};a(52);function P(t){var e=t.component,a=t.authenticated,n=Object(l.a)(t,["component","authenticated"]);return Object(d.jsx)(u.b,Object(o.a)(Object(o.a)({},n),{},{render:function(t){return!0===a?Object(d.jsx)(e,Object(o.a)({},t)):Object(d.jsx)(u.a,{to:{pathname:"/login",state:{from:t.location}}})}}))}function M(t){var e=t.component,a=t.authenticated,n=Object(l.a)(t,["component","authenticated"]);return Object(d.jsx)(u.b,Object(o.a)(Object(o.a)({},n),{},{render:function(t){return!0===a?Object(d.jsx)(u.a,{to:"/chat"}):Object(d.jsx)(e,Object(o.a)({},t))}}))}var R=function(){var t=Object(n.useState)(!1),e=Object(i.a)(t,2),a=e[0],c=e[1],r=Object(n.useState)(!0),s=Object(i.a)(r,2),o=s[0],l=s[1];return Object(n.useEffect)((function(){h().onAuthStateChanged((function(t){t?(c(!0),l(!1)):(c(!1),l(!1))}))})),!0===o?Object(d.jsx)("h2",{children:"Loading..."}):Object(d.jsxs)(b.a,{children:[Object(d.jsx)(m,{}),Object(d.jsxs)(u.d,{children:[Object(d.jsx)(u.b,{exact:!0,path:"/justalk",component:f}),Object(d.jsx)(P,{path:"/chat",authenticated:a,component:S}),Object(d.jsx)(M,{path:"/signup",authenticated:a,component:L}),Object(d.jsx)(M,{path:"/login",authenticated:a,component:D})]})]})},B=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,54)).then((function(e){var a=e.getCLS,n=e.getFID,c=e.getFCP,r=e.getLCP,s=e.getTTFB;a(t),n(t),c(t),r(t),s(t)}))};s.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(R,{})}),document.getElementById("root")),B()}},[[53,1,2]]]);
//# sourceMappingURL=main.efa77749.chunk.js.map